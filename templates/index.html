HemasriMuddam
hemasrimuddam
Online

Shiva Kumar ‚Äî 09/10/2024 9:33 PM
https://youtu.be/nAKhxQ3hcMA?si=_izkwcKkUjqI7ko4
YouTube
Pradip Nichite
Chatbot Answering from Your Own Knowledge Base: Langchain, ChatGPT,...
Image
last 3 chudu chalu
ivi best anipisthunayi
https://blog.futuresmart.ai/building-a-document-based-question-answering-system-with-langchain-pinecone-and-llms-like-gpt-4-and-chatgpt
FutureSmart AI Blog
Building a Document-based Question Answering System with LangChain,...
Build document-based question-answering systems using LangChain, Pinecone, LLMs like GPT-4, and semantic search for precise, context-aware AI solutions.
Building a Document-based Question Answering System with LangChain,...
Shiva Kumar ‚Äî 09/10/2024 9:57 PM
https://blog.futuresmart.ai/building-an-interactive-chatbot-with-langchain-chatgpt-pinecone-and-streamlit
FutureSmart AI Blog
Building an Interactive Chatbot with Langchain, ChatGPT, Pinecone, ...
Creating a chatbot that leverages the power of Langchain, OpenAI's ChatGPT, Pinecone, and Streamlit Chat.
Building an Interactive Chatbot with Langchain, ChatGPT, Pinecone, ...
HemasriMuddam ‚Äî 09/10/2024 9:59 PM
Orey
Mental osthundhi ra
Anni pedthunav
Shiva Kumar ‚Äî 09/10/2024 9:59 PM
naku edho knchm ardam ayendi
manam edho okate chpali kada ne
mari
ela chestam ani
adigte
HemasriMuddam ‚Äî 09/10/2024 10:02 PM
Avuna
Dhanikosama
Orey WhatsApp lo Petra‚Äôs
E discord lo em ardham avvatle
Emem videos anukunavo
WhatsApp lo pettu
Shiva Kumar ‚Äî 09/10/2024 10:03 PM
ha undu
Shiva Kumar ‚Äî 09/10/2024 10:12 PM
pettina chusava
whats lo
Shiva Kumar ‚Äî 09/24/2024 10:53 PM
import os
import numpy as np
from flask import Flask, request, jsonify, send_from_directory
from pdfminer.high_level import extract_text
import spacy
from sentence_transformers import SentenceTransformer
Expand
chatbot.py
3 KB
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chatbot Interface</title>
Expand
index.html
7 KB
Shiva Kumar ‚Äî 09/25/2024 12:02 PM
https://python.langchain.com/docs/how_to/#embedding-models
How-to guides | ü¶úÔ∏èüîó LangChain
Here you‚Äôll find answers to ‚ÄúHow do I‚Ä¶.?‚Äù types of questions.
How-to guides | ü¶úÔ∏èüîó LangChain
Shiva Kumar ‚Äî 09/25/2024 4:36 PM
https://youtube.com/watch?v=Kz3W_H3H92A&si=hR8EWXwftmwOXmkL
YouTube
Abhishek Technologies
Query PDF files get answer with citation  | LangChain | Hugging Fac...
Image
https://github.com/abhishek-bhattacharjee-job/langchain/tree/main
GitHub
GitHub - abhishek-bhattacharjee-job/langchain
Contribute to abhishek-bhattacharjee-job/langchain development by creating an account on GitHub.
GitHub - abhishek-bhattacharjee-job/langchain
Shiva Kumar ‚Äî 09/26/2024 8:37 AM
Attachment file type: acrobat
ShivakumarMalyala.pdf
89.81 KB
Shiva Kumar ‚Äî 09/28/2024 5:25 PM
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastel Full-screen Chat Interface</title>
Expand
index.html
7 KB
Shiva Kumar ‚Äî 09/29/2024 12:03 PM
https://meet.google.com/uon-ccvb-kgq
Shiva Kumar ‚Äî 09/30/2024 12:04 AM
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pastel Full-screen Chat Interface</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
Expand
message.txt
7 KB
HemasriMuddam ‚Äî 10/01/2024 4:16 PM
Attachment file type: acrobat
2024_fall_Muddam__Hemasrioverleaf.pdf
335.29 KB
Shiva Kumar ‚Äî 10/01/2024 9:11 PM
import unittest
import re
from chatbot import app, qa, prompt_template, validate_answer

class ChatbotTestCase(unittest.TestCase):
    @classmethod
Expand
message.txt
3 KB
Shiva Kumar ‚Äî 10/07/2024 1:07 PM
https://youtu.be/El_VMlA62lw?si=s-V-GrbZA1HXejTf
YouTube
Abhishek Technologies
Query PDF files get answer with citation | LangChain | OpenAI
Image
https://github.com/ abhishek-bhattacharjee-job/langchain/
GitHub
GitHub: Let‚Äôs build from here
GitHub is where over 100 million developers shape the future of software, together. Contribute to the open source community, manage your Git repositories, review code like a pro, track bugs and fea...
GitHub: Let‚Äôs build from here
Shiva Kumar ‚Äî 10/07/2024 2:10 PM
sk-n_mEjShjOPtfvJLd4JS1dpjo3jwnE7vKj0uszSW8tJT3BlbkFJfCQowIXjZPCy1BHwTffvluLQL3sZgSmOyb3l3tFBMA
org-WFLyChm5BEDa5qqhZnjDyVNy
HemasriMuddam ‚Äî 10/07/2024 2:41 PM
_
Shiva Kumar ‚Äî 10/07/2024 2:41 PM
Improve the chatbot‚Äôs ability to understand and answer questions by enhancing the prompt structure and including examples of ideal questions and responses. Additionally, optimize API requests, implement caching, and consider using a smaller model to reduce response time and improve overall speed.
Refine the prompts to improve accuracy and make responses more conversational. Optimize API calls and use caching to speed up response time.
HemasriMuddam ‚Äî 10/09/2024 9:44 PM
Set up the testing environment

AC:
Model should be able to run locally.

Expand
message.txt
3 KB
Shiva Kumar ‚Äî 10/09/2024 10:36 PM
Task: Set Up the Testing Environment
Description: Prepare the environment to run and test the chatbot model locally.
Acceptance Criteria (AC): The model should run successfully on the local machine.
Task: Store Chat History
Description: Save the questions asked by users during chat sessions in the UI.
Acceptance Criteria (AC): A document exists with the history of questions from the UI.
Task: Research OpenAI Model
Description: Explore and document the OpenAI model API and its implementation.
Acceptance Criteria (AC): A document is available outlining the API prototype used.
Task: Refine the Frontend Model
Description: Enhance the UI with details about the internship chatbot, including a title, logo, and visual improvements.
Acceptance Criteria (AC): The front end displays the chatbot title, logo, and has an improved appearance.
Task: Research Storing Chat History
Description: Investigate methods to store chat history in the backend.
Acceptance Criteria (AC): A document outlining the process for storing chat history is published in Confluence.
Task: Scrum Master Responsibilities
Description: Track and report on scrum activities such as meeting hours, attendance, and issues raised.
Acceptance Criteria (AC): A report on meeting hours, attendance, and issues addressed is available.
Task: Remove Source Display from Chat Responses
Description: Modify the chatbot to remove "source" and "answer" tags from its responses.
Acceptance Criteria (AC): The chatbot no longer displays "source" or "answer" in its replies.
Shiva Kumar ‚Äî 10/09/2024 10:43 PM
Task: Deploy Chatbot to AWS
Description: Deploy the chatbot to AWS to make it publicly accessible.
Acceptance Criteria (AC): The chatbot is accessible by the public on AWS.
Task: Prepare 20 Questions and Answers
Description: Write 20 potential questions and answers for the chatbot to handle.
Acceptance Criteria (AC): The questions and answers are documented and added to Confluence.
Task: Test Chatbot Locally by Asking Questions Manually
Description: Manually test the chatbot by asking 100 questions.
Acceptance Criteria (AC): A report in Confluence showing how many out of 100 questions were answered correctly.
Task: Research Testing Accuracy of OpenAI Model
Description: Investigate the method for testing the accuracy of the OpenAI model.
Acceptance Criteria (AC): A document detailing the procedure to test OpenAI model accuracy is published.
Task: Deploy Chatbot to AWS for Sprint 2B
Description: Re-deploy the chatbot for the second sprint to AWS with public access.
Acceptance Criteria (AC): The chatbot is publicly accessible on AWS.
Task: Optimize Chatbot Response Speed
Description: Improve the chatbot to ensure faster response times.
Acceptance Criteria (AC): Chatbot responses are delivered within 5 seconds.
Task: Test Accuracy of OpenAI Model
Description: Evaluate the accuracy of the OpenAI model responses.
Acceptance Criteria (AC): The model achieves an accuracy benchmark of 80%.
Task: Add Response to Greeting Messages and Fallback
Description: Program the chatbot to respond to greetings and add fallback responses when the chatbot doesn't understand a question.
Acceptance Criteria (AC): The chatbot appropriately responds to greetings and gives fallback responses for unrecognized queries.
Task: Implement Automated Testing for OpenAI Model
Description: Set up and run automated tests for the OpenAI model, including edge cases.
Acceptance Criteria (AC): All test cases, including edge cases, pass successfully.
Task: Set Up Testing Environment for OpenAI Model
Description: Prepare the testing environment to run the OpenAI model locally.
Acceptance Criteria (AC): The OpenAI model runs successfully in the local testing environment.
Task: Test Chatbot Locally by Asking Questions Manually for OpenAI Model
Description: Manually test the OpenAI model by asking 200 questions.
Acceptance Criteria (AC): A report in Confluence showing how many out of 200 questions were answered correctly.
Shiva Kumar ‚Äî 10/10/2024 4:41 PM
https://youtu.be/xJ2HXsJreVo?si=F8GoMh5xqYe_kf6M
YouTube
Daniel K.
How to Create YOUR OWN AI Chatbot with OpenAI's API (GPT4)
Image
Shiva Kumar ‚Äî 10/11/2024 12:40 AM
Improve the chatbot's accuracy, performance, and user experience while deploying it on AWS with public access. Set up automated testing, implement OpenAI, and ensure chat history tracking.
HemasriMuddam ‚Äî 10/14/2024 3:16 PM
import os
import json
import torch
from flask import Flask, request, jsonify, render_template
import pdfplumber
from langchain_community.document_loaders import DirectoryLoader
Expand
message.txt
8 KB
Shiva Kumar ‚Äî 10/14/2024 3:22 PM
/Users/bubby/internshipproject/internshipchatbot/lib/python3.11/site-packages/transformers/generation/configuration_utils.py:567: UserWarning: `do_sample` is set to `False`. However, `temperature` is set to `0.7` -- this flag is only used in sample-based generation modes. You should set `do_sample=True` or unset `temperature`.
  warnings.warn(
/Users/bubby/internshipproject/internshipchatbot/lib/python3.11/site-packages/transformers/generation/configuration_utils.py:572: UserWarning: `do_sample` is set to `False`. However, `top_p` is set to `0.9` -- this flag is only used in sample-based generation modes. You should set `do_sample=True` or unset `top_p`.
  warnings.warn(
127.0.0.1 - - [14/Oct/2024 15:22:15] "POST /ask HTTP/1.1" 500 -
Traceback (most recent call last):
Expand
message.txt
4 KB
HemasriMuddam ‚Äî 10/14/2024 3:27 PM
import os
import json
import torch
from flask import Flask, request, jsonify, render_template
import pdfplumber
from langchain_community.document_loaders import DirectoryLoader
Expand
message.txt
8 KB
Shiva Kumar ‚Äî 10/14/2024 3:32 PM
import os
import json
import torch
from flask import Flask, request, jsonify, render_template
import pdfplumber
from langchain_community.document_loaders import DirectoryLoader
Expand
message.txt
8 KB
HemasriMuddam ‚Äî 10/14/2024 3:50 PM
conflucne
Research and Findings:

Over the last few days, I have been researching various approaches for storing the chatbot‚Äôs conversation history. After considering different storage options, I have decided that storing the chat history in a JSON file is the most straightforward and suitable option for our current stage of development.

Here‚Äôs the approach I propose based on my findings.
Expand
message.txt
3 KB
Shiva Kumar ‚Äî 10/16/2024 8:43 PM
https://youtu.be/ztBJqzBU5kc?si=w_SaDw45g453Oiym
YouTube
Tony Kipkemboi
How to chat with your PDFs using local Large Language Models [Ollam...
Image
Shiva Kumar ‚Äî 10/20/2024 10:30 PM
import os
from flask import Flask, request, jsonify, render_template
import pdfplumber
from langchain_community.document_loaders import DirectoryLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain_community.embeddings import OpenAIEmbeddings
Expand
message.txt
8 KB
Shiva Kumar ‚Äî 10/20/2024 10:39 PM
Attachment file type: unknown
updated txt
7.58 KB
import os
from flask import Flask, request, jsonify, render_template
import pdfplumber
from langchain_community.document_loaders import DirectoryLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain_community.embeddings import OpenAIEmbeddings
Expand
message.txt
8 KB
HemasriMuddam ‚Äî 10/22/2024 9:18 PM
Attachment file type: acrobat
2024_fall_Muddam__Hemasri.pdf
792.93 KB
Shiva Kumar ‚Äî 10/23/2024 2:27 PM
18.219.86.12
Shiva Kumar ‚Äî 10/23/2024 6:13 PM
#chatbot.py
import os
from flask import Flask, request, jsonify, render_template
import pdfplumber
from langchain_community.document_loaders import DirectoryLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
Expand
message.txt
9 KB
Shiva Kumar ‚Äî 10/25/2024 7:06 PM
https://github.com/Princekrampah/rag_chatbot_ultimate_guide_tutorial/blob/master/chatbot/rag_function.py
GitHub
rag_chatbot_ultimate_guide_tutorial/chatbot/rag_function.py at mast...
Contribute to Princekrampah/rag_chatbot_ultimate_guide_tutorial development by creating an account on GitHub.
rag_chatbot_ultimate_guide_tutorial/chatbot/rag_function.py at mast...
HemasriMuddam ‚Äî 10/27/2024 10:05 PM
Yesterday, I looked into how we can test our chatbot automatically without adding each answer manually. I found a way to use a language model to create questions and answers directly from the PDFs.

I also looked into automating the comparison between chatbot answers and reference answers with similarity scoring to calculate accuracy efficiently.
My next steps are to set up the LLM for question/answer generation, integrate PDF extraction, and automate the comparison and accuracy reporting.
Shiva Kumar ‚Äî 10/27/2024 10:06 PM
ha bagundi
nvu firsst jira lo task in prpgress lo pettu
HemasriMuddam ‚Äî 10/27/2024 10:14 PM
Ha
Shiva Kumar ‚Äî 10/29/2024 6:01 PM
Hi Professor Jin,

For tomorrow's class, could we attend the morning session instead of the usual time? We would like to celebrate Diwali in the evening. We only have the regular class scheduled, not a sprint review.

Thank you!

Best,
[Your Name]
Subject: Request to Attend Morning Class Due to Diwali Festival

Hi Professor Jin,

I hope you‚Äôre doing well.

For tomorrow‚Äôs class, could we attend the morning session instead of our regular time? Diwali, one of the major Indian festivals, is being celebrated, and we would like to join our friends for the festivities starting in the afternoon. We don‚Äôt have any sprint review scheduled, just the regular class.

Thank you for considering our request, and we hope to hear from you soon.

Best regards,
[Your Name]
HemasriMuddam ‚Äî 10/29/2024 6:07 PM
Thank you for considering theesei
Shiva Kumar ‚Äî 10/29/2024 6:07 PM
okay
HemasriMuddam ‚Äî 10/29/2024 6:07 PM
Nick adigava
Shiva Kumar ‚Äî 10/29/2024 6:08 PM
Thank you for considering our request, and we look forward to your response.
HemasriMuddam ‚Äî 10/29/2024 6:08 PM
Akkarle
Ah lie
Line
Shiva Kumar ‚Äî 10/29/2024 6:08 PM
msg chesa reply le 
HemasriMuddam ‚Äî 10/29/2024 6:08 PM
Reply ichaka dheniki msg cheyi
HemasriMuddam ‚Äî 10/30/2024 3:59 PM
Attachment file type: acrobat
Form I-765, Application For Employment Authorization.pdf
333.20 KB
HemasriMuddam ‚Äî 10/31/2024 11:47 PM
Ôøº
Attachment file type: acrobat
Application For Employment Authorization.pdf
3.47 MB
HemasriMuddam ‚Äî 11/03/2024 9:38 PM
Yesterday, I looked into how we can test our chatbot automatically without adding each answer manually. I found a way to use a language model to create questions and answers directly from the PDFs.

I also looked into automating the comparison between chatbot answers and reference answers with similarity scoring to calculate accuracy efficiently.
My next steps are to set up the LLM for question/answer generation, integrate PDF extraction, and automate the comparison and accuracy reporting.
Shiva Kumar ‚Äî 11/03/2024 9:56 PM
Here's a draft for a Confluence page titled **"Automated Testing Setup for Chatbot Accuracy"** to document your testing process and keep track of progress:

---

# Automated Testing Setup for Chatbot Accuracy
Expand
message.txt
4 KB
Shiva Kumar ‚Äî 11/04/2024 11:48 PM
how can you help me?

I don't know the answer to that question.


#chatbot.py
Expand
message.txt
9 KB
HemasriMuddam ‚Äî 11/04/2024 11:50 PM
Flask API for user queries with caching and persistent conversational memory
@app.route('/ask', methods=['POST'])
def ask():
    data = request.get_json()
    user_question = data.get('message').strip()
    question_hash = get_question_hash(user_question)

Try retrieving cached response first for identical questions
    cached_response = get_cached_response(question_hash)
    if cached_response:
        # Add a greeting and a polite closing to cached responses
        return jsonify({"response": f"Hello! {cached_response} If there's anything else you need, feel free to ask!"})

    # Generate a new response if no cache is found, leveraging conversation memory
    generated_text = conversation_chain.invoke({"question": user_question})

Extract answer and save conversation to memory file
    answer = generated_text.get("answer", "I'm sorry, I couldn't find an answer to that.")

Add a friendly greeting and polite closing to the new response
    polite_response = f"Hello! {answer} Let me know if you have any more questions!"
    save_interaction_to_json(user_question, polite_response)

    # Save the current memory state to persistent storage
    memory_history = [
        {"user": m.content, "assistant": r.content} 
        for m, r in zip(memory.load_memory_variables({})["chat_history"][::2], memory.load_memory_variables({})["chat_history"][1::2])
    ]

    save_conversation_memory(memory_history)

    return jsonify({"response": polite_response})
Shiva Kumar ‚Äî 11/12/2024 1:10 PM
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNH Internship Chatbot</title>
Expand
message.txt
17 KB
HemasriMuddam ‚Äî 11/13/2024 1:52 PM
https://my-python-app-429956682970.us-central1.run.app/
HemasriMuddam ‚Äî 11/13/2024 9:48 PM
stateDiagram-v2
    [] --> Placed : Order Created
    Placed --> In_Progress : 1-minute delay
    In_Progress --> Packing : 1-minute delay
    Packing --> Ready_for_Pickup : 1-minute delay
    Ready_for_Pickup --> [] : Order Completed

    %% State Descriptions
    state Placed {
        note right of Placed : Order is created and marked as "Placed"
    }
    state In_Progress {
        note right of In_Progress : Order preparation in progress
    }
    state Packing {
        note right of Packing : Order is being packed
    }
    state Ready_for_Pickup {
        note right of Ready_for_Pickup : Order is ready for pickup
    }
Shiva Kumar ‚Äî 11/13/2024 9:52 PM
Attachment file type: acrobat
Order Processing Lifecycle Diagram - Claude.pdf
381.32 KB
Shiva Kumar ‚Äî Yesterday at 7:43 PM
https://chatgpt.com/c/67389f03-eadc-8002-9dd0-a3a04bcf0a71
Shiva Kumar ‚Äî Today at 10:12 PM
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNH Internship Chatbot</title>
Expand
message.txt
18 KB
Ôªø
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNH Internship Chatbot</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --unh-blue: #002B7D;
            --unh-white: #ffffff;
            --chat-bg: rgba(248, 249, 250, 0.95);
            --message-bg: rgba(233, 236, 239, 0.9);
            --input-bg: rgba(248, 249, 250, 0.95);
            --btn-color: #ebf0f9;
            --btn-hover: #0b5ed7;
            --btn-text: #ffffff;
            --border-radius: 0;
            --unh-black: #000000;
        }
        
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        body {
            background-image: url("/Users/bubby/TeamGulliver/static/logo.png"); /* Direct path to the image in the static folder */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }
        
        .page-container {
            height: 100vh;
            width: 100vw;
            backdrop-filter: blur(5px);
            background: rgba(0, 0, 0, 0.3);
        }

        .chat-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 0;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            margin: 0;
        }

        .chat-header {
            background: linear-gradient(135deg, var(--unh-blue) 0%, #004db3 100%);
            color: var(--unh-white);
            padding: 1rem;
            display: flex;
            justify-content: center; /* Centers content horizontally */
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            height: 80px; /* Adjust height as needed */
        }
        .header-content {
            display: flex;
            align-items: center; /* Centers logo and title vertically */
            gap: 10px; /* Adds space between logo and title */
        }

        .chat-header img {
            height: 60px; /* Adjust as needed */
            width: auto;
            object-fit: contain;
        }

        .chat-header-title {
            font-size: 24px;
            font-weight: 600;
            margin: 0;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem; /* Space between messages */
            background-color: transparent;
            background-image: 
                linear-gradient(rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7)),
                url('/Users/bubby/TeamGulliver/static/logo.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .message {
            position: relative;
            margin-bottom: 1.5rem;
            padding: 1rem;
            padding-right: 5rem; /* Adds extra space for the edit button */
            border-radius: 1rem;
            max-width: 75%;
            animation: fadeIn 0.3s ease-in-out;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            word-wrap: break-word;
        }
        

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background-color: rgba(255, 255, 255, 0.9);
            color: #212529;
            align-self: flex-end;
            border-bottom-right-radius: 0.25rem;
            text-align: left;
            padding: 1rem;
            padding-right: 3rem; /* Adds extra padding to the right for the edit button */
            position: relative; /* Ensures the edit button positions correctly within the message box */
        }

        .assistant-message {
            background-color: rgba(255, 255, 255, 0.9);
            color: #212529;
            align-self: flex-start; /* Aligns bot messages to the left */
            border-bottom-left-radius: 0.25rem;
            backdrop-filter: blur(5px);
            text-align: left;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            position: absolute;
            bottom: -16px;
            border-radius: 50%;
            background-color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            z-index: 1;
        }

        .user-message .message-avatar {
            right: -16px;
            background-color: var(--unh-blue);
            color: white;
        }

        .assistant-message .message-avatar {
            left: -16px;
            background-color: var(--unh-blue);
            color: white;
        }

        .input-area {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            background-color: #e6e6fa;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
        }

        .input-group {
            background-color: var(--unh-white);
            border-radius: 2rem;
            padding: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        #user-input {
            border: none;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            background: transparent;
        }

        #user-input:focus {
            box-shadow: none;
        }

        #send-button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: #0b5ed7; 
            color: var(--btn-text);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            margin-right: 0.5rem;
        }

        #send-button:hover {
            background-color: #0b5ed7; /* Keep the color blue on hover */
            transform: scale(1.05);
        }

        .edit-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            color: var(--unh-black);
            padding: 0.25rem 0.5rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .edit-button:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }

        /* Custom Scrollbar */
        .chat-history::-webkit-scrollbar {
            width: 8px;
        }

        .chat-history::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
        }

        .chat-history::-webkit-scrollbar-thumb {
            background: rgba(0, 53, 145, 0.5);
            border-radius: 4px;
        }

        .chat-history::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 53, 145, 0.7);
        }
        .typing-indicator {
            display: flex;
            align-items: center;
            font-size: 1rem;
            color: #666;
            margin-top: 10px;
        }

        .typing-indicator .dot {
            width: 8px;
            height: 8px;
            background-color: #666;
            border-radius: 50%;
            margin: 0 2px;
            animation: blink 1s infinite alternate;
        }

        .typing-indicator .dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator .dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes blink {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }


        @media (max-width: 768px) {
            .chat-container {
                margin: 0;
                border-radius: 0;
            }

            .message {
                max-width: 85%;
            }

            .chat-header {
                padding: 0.75rem;
                height: 70px;
            }

            .chat-header img {
                height: 60px;
            }

            .chat-header-title {
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <div class="container-fluid h-100 p-0">
            <div class="row h-100 m-0">
                <div class="col-12 p-0">
                    <div class="chat-container">
                        <div class="chat-header">
                            <div class="header-content">
                                <img src="{{ url_for('static', filename='logo1.jpeg') }}" alt="UNH Logo" class="img-fluid">
                                <h1 class="chat-header-title">UNH Internship Assistant</h1>
                            </div>
                        </div>
                        
                        <div class="chat-history" id="chat-history">
                            <!-- Chat messages will be inserted here -->
                        </div>
                        <div class="input-area">
                            <div class="input-group">
                                <input type="text" id="user-input" class="form-control" placeholder="Type your text here...">
                                <button id="send-button" class="btn">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
       
        const chatHistory = document.getElementById('chat-history');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');

        function addMessage(content, isUser) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', isUser ? 'user-message' : 'assistant-message');
            
            
            const messageContent = document.createElement('span');
            messageContent.textContent = content;
            messageDiv.appendChild(messageContent);
            
            const avatar = document.createElement('div');
            avatar.classList.add('message-avatar');
            avatar.innerHTML = isUser ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
            messageDiv.appendChild(avatar);
            
            if (isUser) {
                const editButton = document.createElement('button');
                editButton.classList.add('edit-button');
                editButton.innerHTML = '<i class="fas fa-edit"></i>';
                editButton.onclick = function() {
                    editMessage(messageDiv, messageContent, editButton);
                };
                messageDiv.appendChild(editButton);
            }
            
            chatHistory.appendChild(messageDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        function editMessage(messageDiv, messageContent, editButton) {
            const inputGroup = document.createElement('div');
            inputGroup.classList.add('input-group');

            const inputField = document.createElement('input');
            inputField.type = 'text';
            inputField.value = messageContent.textContent;
            inputField.classList.add('form-control');

            const saveButton = document.createElement('button');
            saveButton.innerHTML = '<i class="fas fa-check"></i>';
            saveButton.classList.add('btn', 'btn-primary');
            saveButton.onclick = function() {
                saveMessage(messageDiv, inputField, messageContent, saveButton, editButton);
            };

            inputGroup.appendChild(inputField);
            inputGroup.appendChild(saveButton);

            messageDiv.innerHTML = '';
            messageDiv.appendChild(inputGroup);
        }

        async function saveMessage(messageDiv, inputField, messageContent, saveButton, editButton) {
            const newMessage = inputField.value;
            messageContent.textContent = newMessage;

            messageDiv.innerHTML = '';
            messageDiv.appendChild(messageContent);
            messageDiv.appendChild(editButton);

            const avatar = document.createElement('div');
            avatar.classList.add('message-avatar');
            avatar.innerHTML = '<i class="fas fa-user"></i>';
            messageDiv.appendChild(avatar);

            removeSubsequentMessages(messageDiv);
            await handleResend(newMessage);
        }

        function removeSubsequentMessages(messageDiv) {
            let nextElement = messageDiv.nextElementSibling;
            while (nextElement) {
                nextElement.remove();
                nextElement = messageDiv.nextElementSibling;
            }
        }

        // Typing indicator functions
        function addTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('typing-indicator');
            typingDiv.id = 'typing-indicator';

            // Add "Typing..." text
            const typingText = document.createElement('span');
            typingText.textContent = "Typing";
            typingDiv.appendChild(typingText);

            // Add animated dots
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.classList.add('dot');
                typingDiv.appendChild(dot);
            }

            chatHistory.appendChild(typingDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        function removeTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        // Handle message send with typing indicator
        async function handleSend() {
            const message = userInput.value.trim();
            if (message) {
                addMessage(message, true);
                userInput.value = '';

                // Show typing indicator before fetching response
                addTypingIndicator();

                try {
                    const response = await fetch('/ask', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ message: message })
                    });

                    // Remove typing indicator after receiving response
                    removeTypingIndicator();

                    if (response.ok) {
                        const data = await response.json();
                        addMessage(data.response, false);
                    } else {
                        addMessage("Error: Unable to get a response.", false);
                    }
                } catch (error) {
                    removeTypingIndicator();
                    addMessage("Error: Unable to communicate with the server.", false);
                }
            }
        }

        // Handle message resend with typing indicator
        async function handleResend(newMessage) {
            // Show typing indicator before fetching response
            addTypingIndicator();

            try {
                const response = await fetch('/ask', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ message: newMessage })
                });

                // Remove typing indicator after receiving response
                removeTypingIndicator();

                if (response.ok) {
                    const data = await response.json();
                    addMessage(data.response, false);
                } else {
                    addMessage("Error: Unable to get a response.", false);
                }
            } catch (error) {
                removeTypingIndicator();
                addMessage("Error: Unable to communicate with the server.", false);
            }
        }

        // Event listeners
        sendButton.addEventListener('click', handleSend);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSend();
            }
        });

    </script>
</body>
</html>